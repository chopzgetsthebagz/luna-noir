#!/usr/bin/env python3
"""
Test FACE DE-PIXELATION + TATTOO CONSISTENCY + FACIAL FEATURE IMPROVEMENTS
"""

import sys
from pathlib import Path

# Add src to path
sys.path.insert(0, str(Path(__file__).parent))

from src.image.luna_generator import generate_luna_scenario, generate_luna_selfie

print("=" * 80)
print("üß™ TESTING FACE DE-PIXELATION + TATTOO + FACIAL FEATURES")
print("=" * 80)
print("\nüé® IMPROVEMENTS MADE:")
print()
print("1Ô∏è‚É£ FACE DE-PIXELATION:")
print("   BASE DESCRIPTION:")
print("   ‚Ä¢ Added: 'long black lashes' (eye detail)")
print("   ‚Ä¢ Added: 'visible pores' (skin texture)")
print("   ‚Ä¢ Added: 'delicate jawline' (face structure)")
print("   ‚Ä¢ Added: 'dark plum matte lipstick' (lip detail)")
print("   ‚Ä¢ Added: 'small straight nose' (nose detail)")
print("   ‚Ä¢ Added: 'sharp facial details' (overall sharpness)")
print()
print("   GENERATION PROMPTS:")
print("   ‚Ä¢ Added: 'sharp detailed face'")
print("   ‚Ä¢ Added: 'crisp facial features'")
print("   ‚Ä¢ Added: 'high detail eyes and lips'")
print("   ‚Ä¢ Changed: '8K' ‚Üí '8K ultra HD'")
print()
print("   NEGATIVE PROMPTS:")
print("   ‚Ä¢ Added: 'pixelated face' (blocks face pixelation)")
print("   ‚Ä¢ Added: 'pixelated skin' (blocks skin pixelation)")
print("   ‚Ä¢ Added: 'low resolution face' (blocks low-res)")
print("   ‚Ä¢ Added: 'blurry face' (blocks blur)")
print("   ‚Ä¢ Added: 'blurred eyes' (blocks eye blur)")
print("   ‚Ä¢ Added: 'blurred features' (blocks feature blur)")
print("   ‚Ä¢ Added: 'soft focus face' (blocks soft focus)")
print("   ‚Ä¢ Added: 'low detail face' (blocks low detail)")
print("   ‚Ä¢ Added: 'deformed face' (blocks face deformation)")
print("   ‚Ä¢ Added: 'asymmetric face' (blocks asymmetry)")
print("   ‚Ä¢ Added: 'crooked nose' (blocks nose issues)")
print("   ‚Ä¢ Added: 'deformed eyes' (blocks eye issues)")
print()
print("2Ô∏è‚É£ TATTOO CONSISTENCY:")
print("   BASE DESCRIPTION:")
print("   ‚Ä¢ Changed: 'single small simple black line art snake tattoo on right forearm only'")
print("   ‚Ä¢ To: 'single small minimalist black outline snake tattoo on outer right forearm 8cm below elbow facing forward no other tattoos anywhere'")
print()
print("   IMPROVEMENTS:")
print("   ‚úì 'minimalist black outline' (specific style)")
print("   ‚úì 'outer right forearm' (exact location)")
print("   ‚úì '8cm below elbow' (precise placement)")
print("   ‚úì 'facing forward' (orientation)")
print("   ‚úì 'no other tattoos anywhere' (exclusivity)")
print()
print("   GENERATION PROMPTS:")
print("   ‚Ä¢ Changed: 'single snake tattoo right forearm'")
print("   ‚Ä¢ To: 'single small black snake tattoo on right forearm only'")
print()
print("   NEGATIVE PROMPTS:")
print("   ‚Ä¢ Added: 'left arm tattoos' (blocks wrong arm)")
print("   ‚Ä¢ Added: 'tribal tattoos' (blocks wrong style)")
print("   ‚Ä¢ Kept: face, neck, chest, breast, stomach, back, leg tattoos blocked")
print()
print("3Ô∏è‚É£ FACIAL FEATURE CONSISTENCY:")
print("   ADDED SPECIFIC DETAILS:")
print("   ‚úì 'long black lashes' (eyelash detail)")
print("   ‚úì 'delicate jawline' (jaw structure)")
print("   ‚úì 'small straight nose' (nose shape)")
print("   ‚úì 'dark plum matte lipstick' (lip finish)")
print("   ‚úì 'visible pores' (skin realism)")
print("   ‚úì 'sharp facial details' (overall clarity)")
print()
print("=" * 80)

# Test 1: Selfie (primary face test)
print("\n1. Testing sultry selfie (primary face detail test)...")
try:
    image_bytes = generate_luna_selfie(mood="sultry", nsfw=False)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Sharp detailed face, crisp features, high detail eyes/lips")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

# Test 2: Topless (face + tattoo + nipples)
print("\n2. Testing topless photo (face + tattoo + nipples)...")
try:
    image_bytes = generate_luna_scenario(scenario_type="topless", nsfw=True)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Sharp face, single snake tattoo right forearm, light pink nipples")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

# Test 3: Full body nude (overall consistency)
print("\n3. Testing full body nude (overall consistency check)...")
try:
    image_bytes = generate_luna_scenario(scenario_type="fullbody", nsfw=True)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Sharp facial features, single tattoo right forearm only")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

# Test 4: Mirror selfie (tattoo visibility)
print("\n4. Testing mirror selfie (tattoo visibility test)...")
try:
    image_bytes = generate_luna_scenario(scenario_type="mirror", nsfw=True)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Single small black snake on right forearm, no other tattoos")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

# Test 5: Lying nude (close-up potential)
print("\n5. Testing lying nude (face + body detail)...")
try:
    image_bytes = generate_luna_scenario(scenario_type="nude_lying", nsfw=True)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Crisp facial features, high detail eyes, sharp face")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

# Test 6: Seductive selfie (facial detail focus)
print("\n6. Testing seductive selfie (facial detail focus)...")
try:
    image_bytes = generate_luna_selfie(mood="seductive", nsfw=True)
    print(f"   ‚úÖ Generated: {len(image_bytes):,} bytes")
    print(f"   ‚Üí Check: Sharp detailed face, long black lashes, plum matte lips")
except Exception as e:
    print(f"   ‚ùå Failed: {e}")

print("\n" + "=" * 80)
print("‚úÖ FACE + TATTOO + FEATURES TEST COMPLETE")
print("=" * 80)
print("\nüîç EXPECTED RESULTS:")
print()
print("FACE DE-PIXELATION:")
print("  ‚úì Sharp, crisp facial features (not pixelated)")
print("  ‚úì High detail eyes with long black lashes")
print("  ‚úì High detail lips with dark plum matte lipstick")
print("  ‚úì Visible skin texture and pores (not smooth/airbrushed)")
print("  ‚úì Delicate jawline clearly defined")
print("  ‚úì Small straight nose")
print("  ‚úì 8K ultra HD quality")
print()
print("TATTOO CONSISTENCY:")
print("  ‚úì Single small minimalist black outline snake")
print("  ‚úì Located on outer right forearm")
print("  ‚úì 8cm below elbow")
print("  ‚úì Facing forward")
print("  ‚úì NO tattoos on: left arm, face, neck, chest, breasts, stomach, back, legs")
print("  ‚úì NO other tattoos anywhere else")
print()
print("FACIAL FEATURES:")
print("  ‚úì Almond-shaped bright violet purple eyes")
print("  ‚úì Long black lashes")
print("  ‚úì Thick black winged eyeliner")
print("  ‚úì Heart-shaped face")
print("  ‚úì High defined cheekbones")
print("  ‚úì Delicate jawline")
print("  ‚úì Small straight nose")
print("  ‚úì Full pouty lips")
print("  ‚úì Dark plum matte lipstick")
print("  ‚úì Very pale porcelain skin")
print("  ‚úì Visible pores and natural texture")
print()
print("KEY IMPROVEMENTS:")
print("  üé® Face is now SHARP and DETAILED (not pixelated)")
print("  üé® Tattoo is PRECISELY DEFINED (right forearm only, 8cm below elbow)")
print("  üé® Facial features are ULTRA-SPECIFIC (lashes, nose, jawline, lip finish)")
print("  üé® Comprehensive negative prompts block all variations")
print("  üé® 8K ultra HD quality for maximum clarity")

